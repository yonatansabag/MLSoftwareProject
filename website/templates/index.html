<!-- <!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Upload Your Image</title>
    <style>
        /* Styles omitted for brevity */
    </style>
    <script>
        function uploadImage(isAsync) {
            const fileInput = document.getElementById('file');
            const file = fileInput.files[0];
            const formData = new FormData();
            formData.append('image', file);

            const endpoint = isAsync ? '/async_upload_image' : '/sync_upload_image';
            const xhr = new XMLHttpRequest();
            xhr.open('POST', endpoint, true);

            xhr.onreadystatechange = function () {
                if (xhr.readyState === 4) {
                    if (xhr.status === 200) {
                        const data = JSON.parse(xhr.responseText);
                        if (isAsync) {
                            const request_id = data.request_id;
                            pollResult(request_id);
                        } else {
                            const description = data.matches[0].name;
                            document.getElementById('result').innerText = description;
                        }
                    } else {
                        document.getElementById('result').innerText = 'Error uploading image';
                    }
                }
            };

            xhr.send(formData);
        }

        function pollResult(request_id) {
            const pollXhr = new XMLHttpRequest();
            pollXhr.open('GET', /result/${request_id}, true);

            pollXhr.onreadystatechange = function () {
                if (pollXhr.readyState === 4) {
                    if (pollXhr.status === 200) {
                        const data = JSON.parse(pollXhr.responseText);
                        if (data.status === 'completed') {
                            const description = data.matches[0].name;
                            document.getElementById('result').innerText = description;
                        } else if (data.status === 'running') {
                            setTimeout(function () {
                                pollResult(request_id);
                            }, 2000); // Poll every 2 seconds
                        }
                    }
                }
            };

            pollXhr.send();
        }
    </script>
</head>
<body>
    <div class="container">
        <h1>Upload Your Image</h1>
        <label for="file" class="file-input-label">Choose a file</label>
        <input type="file" id="file" accept="image/*">
        <br><br>
        <button onclick="uploadImage(true)">Upload Async</button>
        <button onclick="uploadImage(false)">Upload Sync</button>
        <div id="result"></div>
    </div>
</body>
</html> -->